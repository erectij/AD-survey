<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atopic Dermatitis Survey</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .survey-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .survey-header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .survey-header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .survey-header p {
            opacity: 0.9;
            font-size: 16px;
        }
        
        .section-nav {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 1px solid #e1e5e9;
        }
        
        .section-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 5px;
        }
        
        .section-tab {
            padding: 8px 16px;
            background: #e1e5e9;
            border-radius: 20px;
            font-size: 14px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .section-tab.active {
            background: #4CAF50;
            color: white;
        }
        
        .section-tab.completed {
            background: #2196F3;
            color: white;
        }
        
        .survey-form {
            padding: 40px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .question-group {
            margin-bottom: 32px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }
        
        .question-group.hidden {
            display: none;
        }
        
        .question-label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
            line-height: 1.4;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #fafbfc;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #4CAF50;
            background: white;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }
        
        .age-input-group, .slider-input-group {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        
        .age-slider, .slider-input {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: #e1e5e9;
            outline: none;
            -webkit-appearance: none;
        }
        
        .age-slider::-webkit-slider-thumb, .slider-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }
        
        .age-number, .slider-number {
            width: 100px;
            text-align: center;
        }
        
        .radio-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .radio-option, .checkbox-option {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .radio-option:hover, .checkbox-option:hover {
            background: #e8f5e8;
            border-color: #4CAF50;
        }
        
        .radio-option.selected, .checkbox-option.selected {
            background: #e8f5e8;
            border-color: #4CAF50;
        }
        
        .radio-option input, .checkbox-option input {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .radio-option label, .checkbox-option label {
            flex: 1;
            cursor: pointer;
            font-size: 16px;
            color: #333;
        }
        
        .select-wrapper {
            position: relative;
        }
        
        .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            background: #fafbfc;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
        }
        
        .form-select:focus {
            outline: none;
            border-color: #4CAF50;
            background-color: white;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }
        
        .scale-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            flex-wrap: wrap;
        }
        
        .scale-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
            min-width: 35px;
            flex: 1;
        }
        
        .scale-option:hover {
            background: #e8f5e8;
        }
        
        .scale-option.selected {
            background: #4CAF50;
            color: white;
        }
        
        .scale-option input {
            margin-bottom: 4px;
        }
        
        .scale-option label {
            font-size: 12px;
            text-align: center;
            cursor: pointer;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 16px;
        }
        
        .nav-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .prev-btn {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e1e5e9;
        }
        
        .prev-btn:hover {
            background: #e9ecef;
        }
        
        .next-btn, .submit-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            flex: 1;
        }
        
        .next-btn:hover, .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
        }
        
        .next-btn:disabled, .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .error-message {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .stop-message {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 24px;
            border-radius: 8px;
            text-align: center;
            font-size: 18px;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background-color: white;
            margin: 50% auto;
            padding: 30px;
            border-radius: 16px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            position: relative;
            top: -25%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .modal h2 {
            color: #4CAF50;
            margin-bottom: 16px;
            font-size: 24px;
        }
        
        .time-display {
            font-size: 36px;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .modal-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 16px;
        }
        
        @media (max-width: 768px) {
            .survey-form {
                padding: 24px;
            }
            
            .survey-header {
                padding: 24px;
            }
            
            .section-nav {
                padding: 16px 24px;
            }
            
            .section-tabs {
                gap: 4px;
            }
            
            .section-tab {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .age-input-group, .slider-input-group {
                flex-direction: column;
                gap: 12px;
            }
            
            .age-number, .slider-number {
                width: 100%;
            }
            
            .scale-group {
                gap: 4px;
            }
            
            .scale-option {
                min-width: 30px;
                padding: 6px;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="survey-container">
        <div class="survey-header">
            <h1>Atopic Dermatitis Survey</h1>
            <p>Please answer all questions honestly. Your responses are confidential.</p>
        </div>
        
        <div class="section-nav">
            <div class="section-tabs">
                <div class="section-tab active" data-section="background">Background</div>
                <div class="section-tab" data-section="employment">Employment</div>
                <div class="section-tab" data-section="treatment">Treatment</div>
                <div class="section-tab" data-section="past-treatment">Past Treatment</div>
                <div class="section-tab" data-section="comorbidities">Comorbidities</div>
                <div class="section-tab" data-section="disease-severity">Disease Severity</div>
                <div class="section-tab" data-section="dlqi">DLQI</div>
                <div class="section-tab" data-section="who5">WHO-5</div>
                <div class="section-tab" data-section="poem">POEM</div>
                <div class="section-tab" data-section="hads">HADS</div>
                <div class="section-tab" data-section="wpai">WPAI</div>
            </div>
        </div>
        
        <form class="survey-form" id="surveyForm" novalidate>
            <!-- Background Section -->
            <div class="section active" id="background">
                <h2 class="section-title">Background Information</h2>
                
                <div class="question-group">
                    <label class="question-label">
                        Have you ever been diagnosed with atopic dermatitis by a physician? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="ad_diagnosis" value="yes" id="ad_yes" required>
                            <label for="ad_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="ad_diagnosis" value="no" id="ad_no" required>
                            <label for="ad_no">No</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        When did you first experience atopic dermatitis symptoms? <span class="required">*</span>
                    </label>
                    <div class="select-wrapper">
                        <select name="ad_onset" class="form-select" required>
                            <option value="">Select age range</option>
                            <option value="primary_school">Before or during primary school (≤12 y)</option>
                            <option value="lower_secondary">During lower secondary school (13–15 y)</option>
                            <option value="upper_secondary">During upper secondary school (16–19 y)</option>
                            <option value="20_29">20–29 y</option>
                            <option value="30_39">30–39 y</option>
                            <option value="40_49">40–49 y</option>
                            <option value="50_59">50–59 y</option>
                            <option value="60_69">60–69 y</option>
                            <option value="70_79">70–79 y</option>
                            <option value="80_85">80–85 y</option>
                            <option value="over_85">>85 y</option>
                        </select>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Age <span class="required">*</span>
                    </label>
                    <div class="age-input-group">
                        <input type="range" name="age_slider" class="age-slider" min="18" max="120" value="30" id="ageSlider">
                        <input type="number" name="age" class="form-input age-number" min="18" max="120" value="30" id="ageNumber" required>
                    </div>
                    <div id="ageError" class="error-message" style="display: none;">
                        Participation is for adults younger than 120 years (18-119 years old).
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Location (kommune) <span class="required">*</span>
                    </label>
                    <div class="select-wrapper">
                        <select name="location" class="form-select" required>
                            <option value="">Select kommune</option>
                            <option value="oslo">Oslo</option>
                            <option value="bergen">Bergen</option>
                            <option value="trondheim">Trondheim</option>
                            <option value="stavanger">Stavanger</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Gender <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="gender" value="male" id="gender_male" required>
                            <label for="gender_male">Male</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="gender" value="female" id="gender_female" required>
                            <label for="gender_female">Female</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="gender" value="non_binary" id="gender_nb" required>
                            <label for="gender_nb">Non-binary</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group hidden" id="pregnancyQuestion">
                    <label class="question-label">
                        Are you currently pregnant or lactating? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="pregnant_lactating" value="yes" id="preg_yes"> 
                            <label for="preg_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="pregnant_lactating" value="no" id="preg_no"> 
                            <label for="preg_no">No</label>
                        </div>
                    </div>
                </div>
                
                <div id="pregnancyStop" class="stop-message" style="display: none;">
                    <h3>Thank you for your interest</h3>
                    <p>This survey does not include pregnant or lactating women. Thank you for your time.</p>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Smoking <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="smoking" value="yes" id="smoke_yes" required>
                            <label for="smoke_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="smoking" value="no" id="smoke_no" required>
                            <label for="smoke_no">No</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Weight (kg) <span class="required">*</span>
                    </label>
                    <div class="slider-input-group">
                        <input type="range" name="weight_slider" class="slider-input" min="30" max="200" value="70" id="weightSlider">
                        <input type="number" name="weight" class="form-input slider-number" min="30" max="200" step="0.1" value="70" id="weightNumber" required>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Height (cm) <span class="required">*</span>
                    </label>
                    <div class="slider-input-group">
                        <input type="range" name="height_slider" class="slider-input" min="100" max="220" value="170" id="heightSlider">
                        <input type="number" name="height" class="form-input slider-number" min="100" max="220" step="0.1" value="170" id="heightNumber" required>
                    </div>
                </div>
            </div>
            
            <!-- Employment Section -->
            <div class="section" id="employment">
                <h2 class="section-title">Employment Information</h2>
                
                <div class="question-group">
                    <label class="question-label">
                        Which of the following best describes your current work situation? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="full_time" id="work_full" required>
                            <label for="work_full">Working full-time (100%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="part_time" id="work_part" required>
                            <label for="work_part">Working part-time (<100%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="full_disability" id="work_disability_full" required>
                            <label for="work_disability_full">Full disability pension (100%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="partial_disability" id="work_disability_partial" required>
                            <label for="work_disability_partial">Partial disability pension (50–95%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="not_working" id="work_not" required>
                            <label for="work_not">Not working – other reason</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group hidden" id="partTimeQuestion">
                    <label class="question-label">
                        If working part-time, what percentage of a full-time position do you usually work? <span class="required">*</span>
                    </label>
                    <div class="slider-input-group">
                        <input type="range" name="part_time_slider" class="slider-input" min="1" max="99" value="50" id="partTimeSlider">
                        <input type="number" name="part_time_percentage" class="form-input slider-number" min="1" max="99" value="50" id="partTimeNumber"> 
                    </div>
                </div>
                
                <div class="question-group hidden" id="disabilityPercentageQuestion">
                    <label class="question-label">
                        If on partial disability pension, what percentage disability has been approved? <span class="required">*</span>
                    </label>
                    <div class="select-wrapper">
                        <select name="disability_percentage" class="form-select"> 
                            <option value="">Select percentage</option>
                            <option value="50">50%</option>
                            <option value="55">55%</option>
                            <option value="60">60%</option>
                            <option value="65">65%</option>
                            <option value="70">70%</option>
                            <option value="75">75%</option>
                            <option value="80">80%</option>
                            <option value="85">85%</option>
                            <option value="90">90%</option>
                            <option value="95">95%</option>
                        </select>
                    </div>
                </div>
                
                <div class="question-group hidden" id="disabilityReasonQuestion">
                    <label class="question-label">
                        If you receive a disability pension (full or partial), what is the main reason? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="disability_reason" value="atopic_dermatitis" id="disability_ad"> 
                            <label for="disability_ad">Atopic dermatitis</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="disability_reason" value="other" id="disability_other"> 
                            <label for="disability_other">Other reason</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group hidden" id="notWorkingReasonQuestion">
                    <label class="question-label">
                        If you are not working for another reason, please indicate which best applies: <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="pensioner" id="not_work_pensioner"> 
                            <label for="not_work_pensioner">Pensioner</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="student" id="not_work_student">
                            <label for="not_work_student">Student / pupil</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="military" id="not_work_military">
                            <label for="not_work_military">Military service</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="assessment" id="not_work_assessment">
                            <label for="not_work_assessment">Work assessment allowance</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="job_seeker" id="not_work_seeker">
                            <label for="not_work_seeker">Job seeker</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="parental" id="not_work_parental">
                            <label for="not_work_parental">Parental leave</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="home_duties" id="not_work_home">
                            <label for="not_work_home">Home duties</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="other" id="not_work_other">
                            <label for="not_work_other">Other</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Household income <span class="required">*</span>
                    </label>
                    <div class="select-wrapper">
                        <select name="household_income" class="form-select" required>
                            <option value="">Select income range</option>
                            <option value="under_400k">< 400 000 NOK</option>
                            <option value="400_599k">400 000 – 599 999 NOK</option>
                            <option value="600_799k">600 000 – 799 999 NOK</option>
                            <option value="800_1099k">800 000 – 1 099 999 NOK</option>
                            <option value="1100_1499k">1 100 000 – 1 499 999 NOK</option>
                            <option value="1500k_plus">≥ 1 500 000 NOK</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Treatment Section -->
            <div class="section" id="treatment">
                <h2 class="section-title">Current Treatment Information</h2>
                
                <div class="question-group">
                    <label class="question-label">
                        Have you been to or been referred to a dermatologist for your atopic dermatitis? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dermatologist" value="yes" id="derm_yes" required>
                            <label for="derm_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dermatologist" value="no" id="derm_no" required>
                            <label for="derm_no">No</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Have you ever received treatment for AD? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="ever_treated" value="yes" id="treated_yes" required>
                            <label for="treated_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="ever_treated" value="no" id="treated_no" required>
                            <label for="treated_no">No</label>
                        </div>
                    </div>
                </div>
                
                <div id="treatmentQuestions" style="display: none;">
                    <div class="question-group">
                        <label class="question-label">
                            When did you first receive treatment for AD? <span class="required">*</span>
                        </label>
                        <div class="select-wrapper">
                            <select name="first_treatment" class="form-select"> 
                                <option value="">Select age range</option>
                                <option value="primary_school">Before or during primary school (≤12 y)</option>
                                <option value="lower_secondary">During lower secondary school (13–15 y)</option>
                                <option value="upper_secondary">During upper secondary school (16–19 y)</option>
                                <option value="20_29">20–29 y</option>
                                <option value="30_39">30–39 y</option>
                                <option value="40_49">40–49 y</option>
                                <option value="50_59">50–59 y</option>
                                <option value="60_69">60–69 y</option>
                                <option value="70_79">70–79 y</option>
                                <option value="80_85">80–85 y</option>
                                <option value="over_85">>85 y</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="question-group">
                        <label class="question-label">
                            Are you currently taking oral medication for atopic dermatitis? <span class="required">*</span>
                        </label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_oral" value="yes" id="oral_current_yes"> 
                                <label for="oral_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_oral" value="no" id="oral_current_no"> 
                                <label for="oral_current_no">No</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="question-group hidden" id="currentOralMedsQuestion">
                        <label class="question-label">
                            Which oral medication(s) are you currently taking? (Select all that apply)
                        </label>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="methotrexate" id="oral_methotrexate">
                                <label for="oral_methotrexate">Methotrexate</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="cyclosporine" id="oral_cyclosporine">
                                <label for="oral_cyclosporine">Cyclosporine (Sandimmun)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="azathioprine" id="oral_azathioprine">
                                <label for="oral_azathioprine">Azathioprine (Imurel)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="baricitinib" id="oral_baricitinib">
                                <label for="oral_baricitinib">Baricitinib (Olumiant)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="abrocitinib" id="oral_abrocitinib">
                                <label for="oral_abrocitinib">Abrocitinib (Cibinqo)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="upadacitinib" id="oral_upadacitinib">
                                <label for="oral_upadacitinib">Upadacitinib (Rinvoq)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="prednisolone" id="oral_prednisolone">
                                <label for="oral_prednisolone">Prednisolone</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="other_oral" id="oral_other">
                                <label for="oral_other">Other oral medication</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="question-group">
                        <label class="question-label">
                            Are you currently receiving injectable treatment for atopic dermatitis? <span class="required">*</span>
                        </label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_injectable" value="yes" id="injectable_current_yes"> 
                                <label for="injectable_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_injectable" value="no" id="injectable_current_no"> 
                                <label for="injectable_current_no">No</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="question-group hidden" id="currentInjectableMedsQuestion">
                        <label class="question-label">
                            Which injectable treatment(s) are you currently receiving? (Select all that apply)
                        </label>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_injectable_meds" value="methotrexate_injection" id="inject_methotrexate">
                                <label for="inject_methotrexate">Methotrexate autoinjector (Metex / Methofill / Nordimet)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_injectable_meds" value="lebrikizumab" id="inject_lebrikizumab">
                                <label for="inject_lebrikizumab">Lebrikizumab (Ebglyss)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_injectable_meds" value="dupilumab" id="inject_dupilumab">
                                <label for="inject_dupilumab">Dupilumab (Dupixent)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_injectable_meds" value="other_injectable" id="inject_other">
                                <label for="inject_other">Other injectable</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="question-group">
                        <label class="question-label">
                            Are you currently using topical therapy (creams, ointments, lotions) for atopic dermatitis? <span class="required">*</span>
                        </label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_topical" value="yes" id="topical_current_yes"> 
                                <label for="topical_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_topical" value="no" id="topical_current_no"> 
                                <label for="topical_current_no">No</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="question-group hidden" id="currentTopicalMedsQuestion">
                        <label class="question-label">
                            Which topical therapy are you currently using? (Select all that apply)
                        </label>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_topical_meds" value="corticosteroid" id="topical_corticosteroid">
                                <label for="topical_corticosteroid">Topical corticosteroid</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_topical_meds" value="other_topical" id="topical_other">
                                <label for="topical_other">Other topical therapy</label>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <label class="question-label">
                            Are you currently receiving phototherapy for atopic dermatitis? <span class="required">*</span>
                        </label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_phototherapy" value="yes" id="photo_current_yes"> 
                                <label for="photo_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_phototherapy" value="no" id="photo_current_no"> 
                                <label for="photo_current_no">No</label>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <label class="question-label">
                            Are you using any other form of treatment (e.g., complementary or alternative remedies)? <span class="required">*</span>
                        </label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_alternative" value="yes" id="alt_current_yes"> 
                                <label for="alt_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_alternative" value="no" id="alt_current_no"> 
                                <label for="alt_current_no">No</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="question-group" id="currentNoTreatmentAnyQuestionGroup">
                        <label class="question-label">
                            Are you currently not receiving any treatment for atopic dermatitis? <span class="required">*</span>
                        </label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_no_treatment_any" value="yes" id="no_treatment_current_yes"> 
                                <label for="no_treatment_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_no_treatment_any" value="no" id="no_treatment_current_no"> 
                                <label for="no_treatment_current_no">No</label>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <label class="question-label">
                            Are you satisfied with current treatment? (0-10 scale, where 0 = not satisfied at all, 10 = completely satisfied) <span class="required">*</span>
                        </label>
                        <div class="scale-group">
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="0" id="satisfaction_0"> 
                                <label for="satisfaction_0">0</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="1" id="satisfaction_1">
                                <label for="satisfaction_1">1</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="2" id="satisfaction_2">
                                <label for="satisfaction_2">2</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="3" id="satisfaction_3">
                                <label for="satisfaction_3">3</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="4" id="satisfaction_4">
                                <label for="satisfaction_4">4</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="5" id="satisfaction_5">
                                <label for="satisfaction_5">5</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="6" id="satisfaction_6">
                                <label for="satisfaction_6">6</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="7" id="satisfaction_7">
                                <label for="satisfaction_7">7</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="8" id="satisfaction_8">
                                <label for="satisfaction_8">8</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="9" id="satisfaction_9">
                                <label for="satisfaction_9">9</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="treatment_satisfaction" value="10" id="satisfaction_10">
                                <label for="satisfaction_10">10</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Past Treatment Section -->
            <div class="section" id="past-treatment">
                <h2 class="section-title">Past Treatment Information</h2>
                <p style="margin-bottom: 30px; text-align: center; color: #666;">Please tell us about AD treatments you have used in the past but are no longer using.</p>

                <div class="question-group">
                    <label class="question-label">
                        Have you previously taken oral medications for AD that you are no longer taking? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="past_oral_received" value="yes" id="past_oral_yes" required>
                            <label for="past_oral_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="past_oral_received" value="no" id="past_oral_no" required>
                            <label for="past_oral_no">No</label>
                        </div>
                    </div>
                </div>
                <div class="question-group hidden" id="pastOralMedsQuestion">
                    <label class="question-label">
                        Which past oral medication(s) for AD have you taken? (Select all that apply)
                    </label>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_oral_meds" value="methotrexate" id="past_oral_methotrexate">
                            <label for="past_oral_methotrexate">Methotrexate</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_oral_meds" value="cyclosporine" id="past_oral_cyclosporine">
                            <label for="past_oral_cyclosporine">Cyclosporine (Sandimmun)</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_oral_meds" value="azathioprine" id="past_oral_azathioprine">
                            <label for="past_oral_azathioprine">Azathioprine (Imurel)</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_oral_meds" value="baricitinib" id="past_oral_baricitinib">
                            <label for="past_oral_baricitinib">Baricitinib (Olumiant)</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_oral_meds" value="abrocitinib" id="past_oral_abrocitinib">
                            <label for="past_oral_abrocitinib">Abrocitinib (Cibinqo)</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_oral_meds" value="upadacitinib" id="past_oral_upadacitinib">
                            <label for="past_oral_upadacitinib">Upadacitinib (Rinvoq)</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_oral_meds" value="prednisolone" id="past_oral_prednisolone">
                            <label for="past_oral_prednisolone">Prednisolone</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_oral_meds" value="other_oral" id="past_oral_other">
                            <label for="past_oral_other">Other oral medication</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <label class="question-label">
                        Have you previously received injectable treatments for AD that you are no longer receiving? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="past_injectable_received" value="yes" id="past_injectable_yes" required>
                            <label for="past_injectable_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="past_injectable_received" value="no" id="past_injectable_no" required>
                            <label for="past_injectable_no">No</label>
                        </div>
                    </div>
                </div>
                <div class="question-group hidden" id="pastInjectableMedsQuestion">
                    <label class="question-label">
                        Which past injectable treatment(s) for AD have you received? (Select all that apply)
                    </label>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_injectable_meds" value="methotrexate_injection" id="past_inject_methotrexate">
                            <label for="past_inject_methotrexate">Methotrexate autoinjector (Metex / Methofill / Nordimet)</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_injectable_meds" value="lebrikizumab" id="past_inject_lebrikizumab">
                            <label for="past_inject_lebrikizumab">Lebrikizumab (Ebglyss)</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_injectable_meds" value="dupilumab" id="past_inject_dupilumab">
                            <label for="past_inject_dupilumab">Dupilumab (Dupixent)</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_injectable_meds" value="other_injectable" id="past_inject_other">
                            <label for="past_inject_other">Other injectable</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <label class="question-label">
                        Have you previously used topical therapies for AD that you are no longer using? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="past_topical_received" value="yes" id="past_topical_yes" required>
                            <label for="past_topical_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="past_topical_received" value="no" id="past_topical_no" required>
                            <label for="past_topical_no">No</label>
                        </div>
                    </div>
                </div>
                <div class="question-group hidden" id="pastTopicalMedsQuestion">
                    <label class="question-label">
                        Which past topical therapy for AD have you used? (Select all that apply)
                    </label>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_topical_meds" value="corticosteroid" id="past_topical_corticosteroid">
                            <label for="past_topical_corticosteroid">Topical corticosteroid</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="past_topical_meds" value="other_topical" id="past_topical_other">
                            <label for="past_topical_other">Other topical therapy</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <label class="question-label">
                        Have you previously received phototherapy for atopic dermatitis that you are no longer receiving? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="past_phototherapy_received" value="yes" id="past_photo_yes" required>
                            <label for="past_photo_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="past_phototherapy_received" value="no" id="past_photo_no" required>
                            <label for="past_photo_no">No</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <label class="question-label">
                        Have you previously used any other form of treatment (e.g., complementary or alternative remedies) that you are no longer using? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="past_alternative_received" value="yes" id="past_alt_yes" required>
                            <label for="past_alt_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="past_alternative_received" value="no" id="past_alt_no" required>
                            <label for="past_alt_no">No</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <label class="question-label">
                        Have you ever gone through a period without any treatment for atopic dermatitis? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="past_period_no_treatment" value="yes" id="past_no_treatment_period_yes" required>
                            <label for="past_no_treatment_period_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="past_period_no_treatment" value="no" id="past_no_treatment_period_no" required>
                            <label for="past_no_treatment_period_no">No</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Comorbidities Section -->
            <div class="section" id="comorbidities">
                <h2 class="section-title">Comorbidities</h2>
                
                <div class="question-group">
                    <label class="question-label">
                        Do you receive treatment for asthma, allergy, or rhinosinusitis? (Select all that apply)
                    </label>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" name="respiratory_comorbidities" value="asthma" id="comorbid_asthma">
                            <label for="comorbid_asthma">Asthma</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="respiratory_comorbidities" value="allergy" id="comorbid_allergy">
                            <label for="comorbid_allergy">Allergy</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="respiratory_comorbidities" value="rhinosinusitis" id="comorbid_rhinosinusitis">
                            <label for="comorbid_rhinosinusitis">Rhinosinusitis</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Do you receive treatment for diabetes, cardiovascular disease, or osteoporosis? (Select all that apply)
                    </label>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" name="metabolic_comorbidities" value="diabetes" id="comorbid_diabetes">
                            <label for="comorbid_diabetes">Diabetes</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="metabolic_comorbidities" value="cardiovascular" id="comorbid_cvd">
                            <label for="comorbid_cvd">Cardiovascular disease</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="metabolic_comorbidities" value="osteoporosis" id="comorbid_osteoporosis">
                            <label for="comorbid_osteoporosis">Osteoporosis</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Do you receive treatment for depression, ADHD, or anxiety? (Select all that apply)
                    </label>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" name="mental_health_comorbidities" value="depression" id="comorbid_depression">
                            <label for="comorbid_depression">Depression</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="mental_health_comorbidities" value="adhd" id="comorbid_adhd">
                            <label for="comorbid_adhd">ADHD</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="mental_health_comorbidities" value="anxiety" id="comorbid_anxiety">
                            <label for="comorbid_anxiety">Anxiety</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Disease Severity Section -->
            <div class="section" id="disease-severity">
                <h2 class="section-title">Disease Severity</h2>
                
                <div class="question-group">
                    <label class="question-label">
                        How much of your body is covered by AD? <span class="required">*</span>
                    </label>
                    <div class="select-wrapper">
                        <select name="body_coverage" class="form-select" required>
                            <option value="">Select percentage</option>
                            <option value="0-10">0-10%</option>
                            <option value="11-20">11-20%</option>
                            <option value="21-30">21-30%</option>
                            <option value="31-40">31-40%</option>
                            <option value="41-50">41-50%</option>
                            <option value="51-60">51-60%</option>
                            <option value="61-70">61-70%</option>
                            <option value="71-80">71-80%</option>
                            <option value="81-90">81-90%</option>
                            <option value="91-100">91-100%</option>
                        </select>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        How many days within the last week have your symptoms bothered you? <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="symptoms_days" value="0" id="symptoms_0" required>
                            <label for="symptoms_0">0</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="symptoms_days" value="1" id="symptoms_1" required>
                            <label for="symptoms_1">1</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="symptoms_days" value="2" id="symptoms_2" required>
                            <label for="symptoms_2">2</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="symptoms_days" value="3" id="symptoms_3" required>
                            <label for="symptoms_3">3</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="symptoms_days" value="4" id="symptoms_4" required>
                            <label for="symptoms_4">4</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="symptoms_days" value="5" id="symptoms_5" required>
                            <label for="symptoms_5">5</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="symptoms_days" value="6" id="symptoms_6" required>
                            <label for="symptoms_6">6</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="symptoms_days" value="7" id="symptoms_7" required>
                            <label for="symptoms_7">7</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        On a scale of 0 to 10, with 0 being "no itch" and 10 being "worst itch imaginable", how would you rate your itch at the worst moment during the previous 24 hours? <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="0" id="itch_0" required>
                            <label for="itch_0">0</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="1" id="itch_1" required>
                            <label for="itch_1">1</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="2" id="itch_2" required>
                            <label for="itch_2">2</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="3" id="itch_3" required>
                            <label for="itch_3">3</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="4" id="itch_4" required>
                            <label for="itch_4">4</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="5" id="itch_5" required>
                            <label for="itch_5">5</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="6" id="itch_6" required>
                            <label for="itch_6">6</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="7" id="itch_7" required>
                            <label for="itch_7">7</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="8" id="itch_8" required>
                            <label for="itch_8">8</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="9" id="itch_9" required>
                            <label for="itch_9">9</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="itch_scale" value="10" id="itch_10" required>
                            <label for="itch_10">10</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        To what extent did your itching interfere with your sleep last night? <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="sleep_interference" value="0" id="sleep_0" required>
                            <label for="sleep_0">0<br><small>Not at all</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="sleep_interference" value="1" id="sleep_1" required>
                            <label for="sleep_1">1<br><small>A little</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="sleep_interference" value="2" id="sleep_2" required>
                            <label for="sleep_2">2<br><small>Moderate</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="sleep_interference" value="3" id="sleep_3" required>
                            <label for="sleep_3">3<br><small>A lot</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="sleep_interference" value="4" id="sleep_4" required>
                            <label for="sleep_4">4<br><small>Extremely</small></label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        What body parts are affected by atopic dermatitis? (Select all that apply) <span class="required">*</span>
                    </label>
                    <div class="checkbox-group" id="affectedBodyPartsGroup">
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="head_neck" id="body_head_neck">
                            <label for="body_head_neck">Head and neck</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="arms" id="body_arms">
                            <label for="body_arms">Arms</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="trunk" id="body_trunk">
                            <label for="body_trunk">Trunk</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="legs" id="body_legs">
                            <label for="body_legs">Legs</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="genitals" id="body_genitals">
                            <label for="body_genitals">Genitals</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="hands" id="body_hands">
                            <label for="body_hands">Hands</label>
                        </div>
                    </div>
                     <input type="text" id="affected_body_parts_validation" style="opacity:0; width:0; height:0; position:absolute; z-index:-1;" required>
                </div>
            </div>
            
            <!-- DLQI Section -->
            <div class="section" id="dlqi">
                <h2 class="section-title">DLQI (Dermatology Life Quality Index)</h2>
                <p style="margin-bottom: 30px; text-align: center; color: #666;">Please answer the following questions about how your skin has affected your life over the last week.</p>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, how itchy, sore, painful or stinging has your skin been? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_1" value="0" id="dlqi1_0" required>
                            <label for="dlqi1_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_1" value="1" id="dlqi1_1" required>
                            <label for="dlqi1_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_1" value="2" id="dlqi1_2" required>
                            <label for="dlqi1_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_1" value="3" id="dlqi1_3" required>
                            <label for="dlqi1_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_1" value="na" id="dlqi1_na" required>
                            <label for="dlqi1_na">Not applicable</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, how embarrassed or self-conscious have you been because of your skin? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_2" value="0" id="dlqi2_0" required>
                            <label for="dlqi2_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_2" value="1" id="dlqi2_1" required>
                            <label for="dlqi2_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_2" value="2" id="dlqi2_2" required>
                            <label for="dlqi2_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_2" value="3" id="dlqi2_3" required>
                            <label for="dlqi2_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_2" value="na" id="dlqi2_na" required>
                            <label for="dlqi2_na">Not applicable</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, how much has your skin interfered with you going shopping or looking after your home or garden? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="0" id="dlqi3_0" required>
                            <label for="dlqi3_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="1" id="dlqi3_1" required>
                            <label for="dlqi3_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="2" id="dlqi3_2" required>
                            <label for="dlqi3_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="3" id="dlqi3_3" required>
                            <label for="dlqi3_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="na" id="dlqi3_na" required>
                            <label for="dlqi3_na">Not applicable</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, how much has your skin influenced the clothes you wear? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_4" value="0" id="dlqi4_0" required>
                            <label for="dlqi4_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_4" value="1" id="dlqi4_1" required>
                            <label for="dlqi4_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_4" value="2" id="dlqi4_2" required>
                            <label for="dlqi4_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_4" value="3" id="dlqi4_3" required>
                            <label for="dlqi4_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_4" value="na" id="dlqi4_na" required>
                            <label for="dlqi4_na">Not applicable</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, how much has your skin affected any social or leisure activities? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="0" id="dlqi5_0" required>
                            <label for="dlqi5_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="1" id="dlqi5_1" required>
                            <label for="dlqi5_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="2" id="dlqi5_2" required>
                            <label for="dlqi5_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="3" id="dlqi5_3" required>
                            <label for="dlqi5_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="na" id="dlqi5_na" required>
                            <label for="dlqi5_na">Not applicable</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, how much has your skin made it difficult for you to do any sport? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="0" id="dlqi6_0" required>
                            <label for="dlqi6_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="1" id="dlqi6_1" required>
                            <label for="dlqi6_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="2" id="dlqi6_2" required>
                            <label for="dlqi6_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="3" id="dlqi6_3" required>
                            <label for="dlqi6_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="na" id="dlqi6_na" required>
                            <label for="dlqi6_na">Not applicable</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, has your skin prevented you from working or studying? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_7" value="0" id="dlqi7_0" required>
                            <label for="dlqi7_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_7" value="1" id="dlqi7_1" required>
                            <label for="dlqi7_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_7" value="2" id="dlqi7_2" required>
                            <label for="dlqi7_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_7" value="3" id="dlqi7_3" required>
                            <label for="dlqi7_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_7" value="na" id="dlqi7_na" required>
                            <label for="dlqi7_na">Not applicable</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, how much has your skin created problems with your partner or any of your close friends or relatives? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_8" value="0" id="dlqi8_0" required>
                            <label for="dlqi8_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_8" value="1" id="dlqi8_1" required>
                            <label for="dlqi8_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_8" value="2" id="dlqi8_2" required>
                            <label for="dlqi8_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_8" value="3" id="dlqi8_3" required>
                            <label for="dlqi8_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_8" value="na" id="dlqi8_na" required>
                            <label for="dlqi8_na">Not applicable</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, how much has your skin caused any sexual difficulties? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_9" value="0" id="dlqi9_0" required>
                            <label for="dlqi9_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_9" value="1" id="dlqi9_1" required>
                            <label for="dlqi9_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_9" value="2" id="dlqi9_2" required>
                            <label for="dlqi9_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_9" value="3" id="dlqi9_3" required>
                            <label for="dlqi9_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_9" value="na" id="dlqi9_na" required>
                            <label for="dlqi9_na">Not applicable</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, how much of a problem has the treatment for your skin been, for example by making your home messy, or by taking up time? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_10" value="0" id="dlqi10_0" required>
                            <label for="dlqi10_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_10" value="1" id="dlqi10_1" required>
                            <label for="dlqi10_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_10" value="2" id="dlqi10_2" required>
                            <label for="dlqi10_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_10" value="3" id="dlqi10_3" required>
                            <label for="dlqi10_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_10" value="na" id="dlqi10_na" required>
                            <label for="dlqi10_na">Not applicable</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- WHO-5 Section -->
            <div class="section" id="who5">
                <h2 class="section-title">WHO-5 Well-Being Index</h2>
                <p style="margin-bottom: 30px; text-align: center; color: #666;">Please indicate for each of the five statements which is closest to how you have been feeling over the last two weeks.</p>
                
                <div class="question-group">
                    <label class="question-label">
                        I have felt cheerful and in good spirits <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="who5_1" value="0" id="who1_0" required>
                            <label for="who1_0">0<br><small>At no time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_1" value="1" id="who1_1" required>
                            <label for="who1_1">1<br><small>Some of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_1" value="2" id="who1_2" required>
                            <label for="who1_2">2<br><small>Less than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_1" value="3" id="who1_3" required>
                            <label for="who1_3">3<br><small>More than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_1" value="4" id="who1_4" required>
                            <label for="who1_4">4<br><small>Most of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_1" value="5" id="who1_5" required>
                            <label for="who1_5">5<br><small>All of the time</small></label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I have felt calm and relaxed <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="who5_2" value="0" id="who2_0" required>
                            <label for="who2_0">0<br><small>At no time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_2" value="1" id="who2_1" required>
                            <label for="who2_1">1<br><small>Some of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_2" value="2" id="who2_2" required>
                            <label for="who2_2">2<br><small>Less than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_2" value="3" id="who2_3" required>
                            <label for="who2_3">3<br><small>More than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_2" value="4" id="who2_4" required>
                            <label for="who2_4">4<br><small>Most of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_2" value="5" id="who2_5" required>
                            <label for="who2_5">5<br><small>All of the time</small></label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I have felt active and vigorous <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="who5_3" value="0" id="who3_0" required>
                            <label for="who3_0">0<br><small>At no time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_3" value="1" id="who3_1" required>
                            <label for="who3_1">1<br><small>Some of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_3" value="2" id="who3_2" required>
                            <label for="who3_2">2<br><small>Less than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_3" value="3" id="who3_3" required>
                            <label for="who3_3">3<br><small>More than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_3" value="4" id="who3_4" required>
                            <label for="who3_4">4<br><small>Most of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_3" value="5" id="who3_5" required>
                            <label for="who3_5">5<br><small>All of the time</small></label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I woke up feeling fresh and rested <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="who5_4" value="0" id="who4_0" required>
                            <label for="who4_0">0<br><small>At no time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_4" value="1" id="who4_1" required>
                            <label for="who4_1">1<br><small>Some of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_4" value="2" id="who4_2" required>
                            <label for="who4_2">2<br><small>Less than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_4" value="3" id="who4_3" required>
                            <label for="who4_3">3<br><small>More than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_4" value="4" id="who4_4" required>
                            <label for="who4_4">4<br><small>Most of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_4" value="5" id="who4_5" required>
                            <label for="who4_5">5<br><small>All of the time</small></label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        My daily life has been filled with things that interest me <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="who5_5" value="0" id="who5_0" required>
                            <label for="who5_0">0<br><small>At no time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_5" value="1" id="who5_1" required>
                            <label for="who5_1">1<br><small>Some of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_5" value="2" id="who5_2" required>
                            <label for="who5_2">2<br><small>Less than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_5" value="3" id="who5_3" required>
                            <label for="who5_3">3<br><small>More than half</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_5" value="4" id="who5_4" required>
                            <label for="who5_4">4<br><small>Most of the time</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="who5_5" value="5" id="who5_5" required>
                            <label for="who5_5">5<br><small>All of the time</small></label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- POEM Section -->
            <div class="section" id="poem">
                <h2 class="section-title">POEM (Patient Oriented Eczema Measure)</h2>
                <p style="margin-bottom: 30px; text-align: center; color: #666;">Please answer the following questions about your eczema over the last week.</p>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, on how many days has your skin been itchy because of the eczema? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="0" id="poem1_0" required>
                            <label for="poem1_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="1" id="poem1_1" required>
                            <label for="poem1_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="2" id="poem1_2" required>
                            <label for="poem1_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="3" id="poem1_3" required>
                            <label for="poem1_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="4" id="poem1_4" required>
                            <label for="poem1_4">Every day</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, on how many nights has your sleep been disturbed because of the eczema? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="0" id="poem2_0" required>
                            <label for="poem2_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="1" id="poem2_1" required>
                            <label for="poem2_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="2" id="poem2_2" required>
                            <label for="poem2_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="3" id="poem2_3" required>
                            <label for="poem2_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="4" id="poem2_4" required>
                            <label for="poem2_4">Every day</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, on how many days has your skin been bleeding because of the eczema? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="0" id="poem3_0" required>
                            <label for="poem3_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="1" id="poem3_1" required>
                            <label for="poem3_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="2" id="poem3_2" required>
                            <label for="poem3_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="3" id="poem3_3" required>
                            <label for="poem3_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="4" id="poem3_4" required>
                            <label for="poem3_4">Every day</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, on how many days has your skin been weeping or oozing clear fluid because of the eczema? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="0" id="poem4_0" required>
                            <label for="poem4_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="1" id="poem4_1" required>
                            <label for="poem4_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="2" id="poem4_2" required>
                            <label for="poem4_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="3" id="poem4_3" required>
                            <label for="poem4_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="4" id="poem4_4" required>
                            <label for="poem4_4">Every day</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, on how many days has your skin been cracked because of the eczema? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="0" id="poem5_0" required>
                            <label for="poem5_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="1" id="poem5_1" required>
                            <label for="poem5_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="2" id="poem5_2" required>
                            <label for="poem5_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="3" id="poem5_3" required>
                            <label for="poem5_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="4" id="poem5_4" required>
                            <label for="poem5_4">Every day</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, on how many days has your skin been flaking off because of the eczema? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="0" id="poem6_0" required>
                            <label for="poem6_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="1" id="poem6_1" required>
                            <label for="poem6_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="2" id="poem6_2" required>
                            <label for="poem6_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="3" id="poem6_3" required>
                            <label for="poem6_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="4" id="poem6_4" required>
                            <label for="poem6_4">Every day</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Over the last week, on how many days has your skin felt dry or rough because of the eczema? <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_7" value="0" id="poem7_0" required>
                            <label for="poem7_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_7" value="1" id="poem7_1" required>
                            <label for="poem7_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_7" value="2" id="poem7_2" required>
                            <label for="poem7_2">3-4 days</label>
                        </div>
						<div class="radio-option">
                            <input type="radio" name="poem_7" value="3" id="poem7_3" required>
                            <label for="poem7_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_7" value="4" id="poem7_4" required>
                            <label for="poem7_4">Every day</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- HADS Section -->
            <div class="section" id="hads">
                <h2 class="section-title">HADS (Hospital Anxiety and Depression Scale)</h2>
                <p style="margin-bottom: 30px; text-align: center; color: #666;">Please read each item and select the reply which comes closest to how you have been feeling in the past week.</p>
                
                <div class="question-group">
                    <label class="question-label">
                        I feel tense or 'wound up' <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_1" value="0" id="hads1_0" required>
                            <label for="hads1_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_1" value="1" id="hads1_1" required>
                            <label for="hads1_1">From time to time, occasionally</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_1" value="2" id="hads1_2" required>
                            <label for="hads1_2">A lot of the time</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_1" value="3" id="hads1_3" required>
                            <label for="hads1_3">Most of the time</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I still enjoy the things I used to enjoy <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_2" value="0" id="hads2_0" required>
                            <label for="hads2_0">Definitely as much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_2" value="1" id="hads2_1" required>
                            <label for="hads2_1">Not quite so much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_2" value="2" id="hads2_2" required>
                            <label for="hads2_2">Only a little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_2" value="3" id="hads2_3" required>
                            <label for="hads2_3">Hardly at all</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I get a sort of frightened feeling as if something awful is about to happen <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_3" value="0" id="hads3_0" required>
                            <label for="hads3_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_3" value="1" id="hads3_1" required>
                            <label for="hads3_1">A little, but it doesn't worry me</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_3" value="2" id="hads3_2" required>
                            <label for="hads3_2">Yes, but not too badly</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_3" value="3" id="hads3_3" required>
                            <label for="hads3_3">Very definitely and quite badly</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I can laugh and see the funny side of things <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_4" value="0" id="hads4_0" required>
                            <label for="hads4_0">As much as I always could</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_4" value="1" id="hads4_1" required>
                            <label for="hads4_1">Not quite so much now</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_4" value="2" id="hads4_2" required>
                            <label for="hads4_2">Definitely not so much now</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_4" value="3" id="hads4_3" required>
                            <label for="hads4_3">Not at all</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        Worrying thoughts go through my mind <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_5" value="0" id="hads5_0" required>
                            <label for="hads5_0">Only occasionally</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_5" value="1" id="hads5_1" required>
                            <label for="hads5_1">From time to time, but not too often</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_5" value="2" id="hads5_2" required>
                            <label for="hads5_2">A lot of the time</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_5" value="3" id="hads5_3" required>
                            <label for="hads5_3">A great deal of the time</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I feel cheerful <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_6" value="0" id="hads6_0" required>
                            <label for="hads6_0">Most of the time</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_6" value="1" id="hads6_1" required>
                            <label for="hads6_1">Sometimes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_6" value="2" id="hads6_2" required>
                            <label for="hads6_2">Not often</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_6" value="3" id="hads6_3" required>
                            <label for="hads6_3">Not at all</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I can sit at ease and feel relaxed <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_7" value="0" id="hads7_0" required>
                            <label for="hads7_0">Definitely</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_7" value="1" id="hads7_1" required>
                            <label for="hads7_1">Usually</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_7" value="2" id="hads7_2" required>
                            <label for="hads7_2">Not often</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_7" value="3" id="hads7_3" required>
                            <label for="hads7_3">Not at all</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I feel as if I am slowed down <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_8" value="0" id="hads8_0" required>
                            <label for="hads8_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_8" value="1" id="hads8_1" required>
                            <label for="hads8_1">Sometimes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_8" value="2" id="hads8_2" required>
                            <label for="hads8_2">Very often</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_8" value="3" id="hads8_3" required>
                            <label for="hads8_3">Nearly all the time</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I get a sort of frightened feeling like 'butterflies' in the stomach <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_9" value="0" id="hads9_0" required>
                            <label for="hads9_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_9" value="1" id="hads9_1" required>
                            <label for="hads9_1">Occasionally</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_9" value="2" id="hads9_2" required>
                            <label for="hads9_2">Quite often</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_9" value="3" id="hads9_3" required>
                            <label for="hads9_3">Very often</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I have lost interest in my appearance <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_10" value="0" id="hads10_0" required>
                            <label for="hads10_0">I take just as much care as ever</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_10" value="1" id="hads10_1" required>
                            <label for="hads10_1">I may not take quite as much care</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_10" value="2" id="hads10_2" required>
                            <label for="hads10_2">I don't take as much care as I should</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_10" value="3" id="hads10_3" required>
                            <label for="hads10_3">Definitely</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I feel restless as I have to be on the move <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_11" value="0" id="hads11_0" required>
                            <label for="hads11_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_11" value="1" id="hads11_1" required>
                            <label for="hads11_1">Not very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_11" value="2" id="hads11_2" required>
                            <label for="hads11_2">Quite a lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_11" value="3" id="hads11_3" required>
                            <label for="hads11_3">Very much indeed</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I look forward with enjoyment to things <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_12" value="0" id="hads12_0" required>
                            <label for="hads12_0">As much as I ever did</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_12" value="1" id="hads12_1" required>
                            <label for="hads12_1">Rather less than I used to</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_12" value="2" id="hads12_2" required>
                            <label for="hads12_2">Definitely less than I used to</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_12" value="3" id="hads12_3" required>
                            <label for="hads12_3">Hardly at all</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I get sudden feelings of panic <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_13" value="0" id="hads13_0" required>
                            <label for="hads13_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_13" value="1" id="hads13_1" required>
                            <label for="hads13_1">Not very often</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_13" value="2" id="hads13_2" required>
                            <label for="hads13_2">Quite often</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_13" value="3" id="hads13_3" required>
                            <label for="hads13_3">Very often indeed</label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        I can enjoy a good book or radio or TV program <span class="required">*</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="hads_14" value="0" id="hads14_0" required>
                            <label for="hads14_0">Often</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_14" value="1" id="hads14_1" required>
                            <label for="hads14_1">Sometimes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_14" value="2" id="hads14_2" required>
                            <label for="hads14_2">Not often</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="hads_14" value="3" id="hads14_3" required>
                            <label for="hads14_3">Very seldom</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- WPAI Section -->
            <div class="section" id="wpai">
                <h2 class="section-title">WPAI (Work Productivity and Activity Impairment)</h2>
                <p style="margin-bottom: 30px; text-align: center; color: #666;">The following questions ask about the effect of your health problems on your ability to work and perform regular activities. Please fill in the blanks or select a number, as indicated.</p>
                
                <div class="question-group">
                    <label class="question-label" for="wpai1Number">
                        During the past seven days, how many hours did you miss from work because of your health problems? <span class="required">*</span>
                    </label>
                     <div class="slider-input-group">
                        <input type="range" name="wpai_1_slider" class="slider-input" min="0" max="168" step="0.5" value="0" id="wpai1Slider">
                        <input type="number" name="wpai_1" class="form-input slider-number" min="0" max="168" step="0.5" value="0" id="wpai1Number" required>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label" for="wpai2Number">
                        During the past seven days, how many hours did you miss from work because of any other reason, such as vacation, holidays, time off to participate in this study? <span class="required">*</span>
                    </label>
                    <div class="slider-input-group">
                        <input type="range" name="wpai_2_slider" class="slider-input" min="0" max="168" step="0.5" value="0" id="wpai2Slider">
                        <input type="number" name="wpai_2" class="form-input slider-number" min="0" max="168" step="0.5" value="0" id="wpai2Number" required>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label" for="wpai3Number">
                        During the past seven days, how many hours did you actually work? <span class="required">*</span>
                    </label>
                     <div class="slider-input-group">
                        <input type="range" name="wpai_3_slider" class="slider-input" min="0" max="168" step="0.5" value="0" id="wpai3Slider">
                        <input type="number" name="wpai_3" class="form-input slider-number" min="0" max="168" step="0.5" value="0" id="wpai3Number" required>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        During the past seven days, how much did your health problems affect your productivity while you were working? (0 = health problems had no effect on my work, 10 = health problems completely prevented me from working) <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="0" id="wpai4_0" required>
                            <label for="wpai4_0">0<br><small>No effect</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="1" id="wpai4_1" required>
                            <label for="wpai4_1">1</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="2" id="wpai4_2" required>
                            <label for="wpai4_2">2</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="3" id="wpai4_3" required>
                            <label for="wpai4_3">3</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="4" id="wpai4_4" required>
                            <label for="wpai4_4">4</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="5" id="wpai4_5" required>
                            <label for="wpai4_5">5</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="6" id="wpai4_6" required>
                            <label for="wpai4_6">6</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="7" id="wpai4_7" required>
                            <label for="wpai4_7">7</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="8" id="wpai4_8" required>
                            <label for="wpai4_8">8</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="9" id="wpai4_9" required>
                            <label for="wpai4_9">9</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_4" value="10" id="wpai4_10" required>
                            <label for="wpai4_10">10<br><small>Complete prevention</small></label>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <label class="question-label">
                        During the past seven days, how much did your health problems affect your ability to do your regular daily activities, other than work at a job? (0 = health problems had no effect on my daily activities, 10 = health problems completely prevented me from doing my daily activities) <span class="required">*</span>
                    </label>
                    <div class="scale-group">
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="0" id="wpai5_0" required>
                            <label for="wpai5_0">0<br><small>No effect</small></label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="1" id="wpai5_1" required>
                            <label for="wpai5_1">1</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="2" id="wpai5_2" required>
                            <label for="wpai5_2">2</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="3" id="wpai5_3" required>
                            <label for="wpai5_3">3</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="4" id="wpai5_4" required>
                            <label for="wpai5_4">4</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="5" id="wpai5_5" required>
                            <label for="wpai5_5">5</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="6" id="wpai5_6" required>
                            <label for="wpai5_6">6</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="7" id="wpai5_7" required>
                            <label for="wpai5_7">7</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="8" id="wpai5_8" required>
                            <label for="wpai5_8">8</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="9" id="wpai5_9" required>
                            <label for="wpai5_9">9</label>
                        </div>
                        <div class="scale-option">
                            <input type="radio" name="wpai_5" value="10" id="wpai5_10" required>
                            <label for="wpai5_10">10<br><small>Complete prevention</small></label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button type="button" class="nav-btn prev-btn" id="prevBtn" style="display: none;">Previous</button>
                <button type="button" class="nav-btn next-btn" id="nextBtn">Next Section</button>
                <button type="submit" class="nav-btn submit-btn" id="submitBtn" style="display: none;">Complete Survey</button>
            </div>
        </form>
    </div>
    
    <!-- Timer Result Modal -->
    <div id="timerModal" class="modal">
        <div class="modal-content">
            <h2>Survey Completed!</h2>
            <p>Thank you for your participation.</p>
            <p>Time to complete:</p>
            <div class="time-display" id="completionTime">00:00</div>
            <button class="modal-btn" onclick="closeModal()">Close</button>
        </div>
    </div>
    
    <script>
        let timerStart = null;
        let timerStarted = false;
        let currentSection = 0;
        let surveyStopped = false;
        
        const sections = ['background', 'employment', 'treatment', 'past-treatment', 'comorbidities', 'disease-severity', 'dlqi', 'who5', 'poem', 'hads', 'wpai'];
        
        function startTimer() {
            if (!timerStarted && !surveyStopped) {
                timerStart = new Date();
                timerStarted = true;
                console.log('Timer started');
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            setupSliders();
            setupNavigation();
            setupConditionalLogic();
            setupFormInteractions();
            setupCheckboxGroupValidation();
        });
        
        function setupCheckboxGroupValidation() {
            const bodyPartsCheckboxes = document.querySelectorAll('input[name="affected_body_parts"]');
            const validationInput = document.getElementById('affected_body_parts_validation');

            bodyPartsCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const isAnyChecked = Array.from(bodyPartsCheckboxes).some(cb => cb.checked);
                    validationInput.value = isAnyChecked ? 'valid' : '';
                });
            });
            const isAnyCheckedInitially = Array.from(bodyPartsCheckboxes).some(cb => cb.checked);
            validationInput.value = isAnyCheckedInitially ? 'valid' : '';
        }


        function setupSliders() {
            const ageSlider = document.getElementById('ageSlider');
            const ageNumber = document.getElementById('ageNumber');
            const ageError = document.getElementById('ageError');
            
            function syncAgeInputs(value) {
                ageSlider.value = value;
                ageNumber.value = value;
                if (value < 18 || value > 119) ageError.style.display = 'block';
                else ageError.style.display = 'none';
            }
            if (ageSlider) ageSlider.addEventListener('input', function() { syncAgeInputs(this.value); startTimer(); });
            if (ageNumber) ageNumber.addEventListener('input', function() { syncAgeInputs(this.value); startTimer(); });
            
            function setupGenericSlider(sliderId, numberId) {
                const slider = document.getElementById(sliderId);
                const number = document.getElementById(numberId);
                if (slider && number) {
                    function syncInputs(value) { slider.value = value; number.value = value; }
                    slider.addEventListener('input', function() { syncInputs(this.value); startTimer(); });
                    number.addEventListener('input', function() { syncInputs(this.value); startTimer(); });
                }
            }
            setupGenericSlider('weightSlider', 'weightNumber');
            setupGenericSlider('heightSlider', 'heightNumber');
            setupGenericSlider('partTimeSlider', 'partTimeNumber');
            setupGenericSlider('wpai1Slider', 'wpai1Number');
            setupGenericSlider('wpai2Slider', 'wpai2Number');
            setupGenericSlider('wpai3Slider', 'wpai3Number');
        }
        
        function setupNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            nextBtn.addEventListener('click', function() {
                if (surveyStopped) return;

                const currentSectionElement = document.getElementById(sections[currentSection]);
                let firstInvalidField = null;

                const fieldsToCheck = currentSectionElement.querySelectorAll('input[required], select[required], textarea[required]');
                
                for (const field of fieldsToCheck) {
                    let isFieldEffectivelyVisible = true;
                    let currentElement = field;
                    while (currentElement && currentElement !== document.body) {
                        const styles = window.getComputedStyle(currentElement);
                        if (styles.display === 'none' || styles.visibility === 'hidden') {
                            // Exception for the validation input itself, its visibility is tied to its group
                            if (field.id === 'affected_body_parts_validation' && currentElement.id === 'affected_body_parts_validation') {
                                // Check its conceptual parent group
                                const bodyPartsGroup = document.getElementById('affectedBodyPartsGroup');
                                if (bodyPartsGroup && window.getComputedStyle(bodyPartsGroup).display === 'none') {
                                     isFieldEffectivelyVisible = false;
                                }
                            } else {
                                isFieldEffectivelyVisible = false;
                            }
                            break;
                        }
                        if (currentElement.classList.contains('hidden')) {
                             isFieldEffectivelyVisible = false;
                             break;
                        }
                        currentElement = currentElement.parentElement;
                    }

                    if (isFieldEffectivelyVisible) {
                        if (!field.checkValidity()) {
                            firstInvalidField = field;
                            break; 
                        }
                    }
                }

                if (firstInvalidField) {
                    if (typeof firstInvalidField.reportValidity === 'function') {
                        firstInvalidField.reportValidity(); 
                    } else {
                        firstInvalidField.focus(); 
                    }
                    if (firstInvalidField.id === 'affected_body_parts_validation') {
                         alert('Please select at least one affected body part.');
                    } else {
                         alert('Please complete all required fields in the current section before proceeding.');
                    }
                } else {
                    if (currentSection < sections.length - 1) {
                        currentSection++;
                        showSection(currentSection);
                    }
                }
            });
            
            prevBtn.addEventListener('click', function() {
                if (currentSection > 0 && !surveyStopped) {
                    currentSection--;
                    showSection(currentSection);
                }
            });
            
            document.querySelectorAll('.section-tab').forEach((tab, index) => {
                tab.addEventListener('click', function() {
                    if (!surveyStopped) {
                        currentSection = index;
                        showSection(currentSection);
                    }
                });
            });
        }
        
        function showSection(index) {
            document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
            document.getElementById(sections[index]).classList.add('active');
            document.querySelector('.survey-form').scrollTop = 0;

            document.querySelectorAll('.section-tab').forEach((tab, i) => {
                tab.classList.toggle('active', i === index);
            });
            
            document.getElementById('prevBtn').style.display = index === 0 ? 'none' : 'block';
            document.getElementById('nextBtn').style.display = index === sections.length - 1 ? 'none' : 'block';
            document.getElementById('submitBtn').style.display = index === sections.length - 1 ? 'block' : 'none';
        }
        
        function setRequired(elements, required) {
            elements.forEach(el => {
                if (el) {
                    el.required = required;
                    if (!required && el.type === 'radio' && el.checked) {
                        el.checked = false;
                        (el.closest('.radio-option') || el.closest('.scale-option'))?.classList.remove('selected');
                    }
                     if (!required && el.type === 'checkbox' && el.checked) {
                        el.checked = false;
                         el.closest('.checkbox-option')?.classList.remove('selected');
                    }
                     if (!required && el.tagName === 'SELECT') {
                        el.value = '';
                    }
                }
            });
        }

        function updateNoTreatmentQuestionVisibility() {
            const treatmentDiv = document.getElementById('treatmentQuestions');
            if (!treatmentDiv || treatmentDiv.style.display === 'none') {
                return;
            }

            const noTreatmentGroup = document.getElementById('currentNoTreatmentAnyQuestionGroup');
            const noTreatmentRadios = document.querySelectorAll('input[name="current_no_treatment_any"]');

            const isOralYes = document.querySelector('input[name="current_oral"][value="yes"]:checked');
            const isInjectableYes = document.querySelector('input[name="current_injectable"][value="yes"]:checked');
            const isTopicalYes = document.querySelector('input[name="current_topical"][value="yes"]:checked');
            const isPhototherapyYes = document.querySelector('input[name="current_phototherapy"][value="yes"]:checked');
            const isAlternativeYes = document.querySelector('input[name="current_alternative"][value="yes"]:checked');

            const anyOtherTreatmentSelected = isOralYes || isInjectableYes || isTopicalYes || isPhototherapyYes || isAlternativeYes;

            if (anyOtherTreatmentSelected) {
                noTreatmentGroup.classList.add('hidden');
                setRequired(noTreatmentRadios, false); 
            } else {
                noTreatmentGroup.classList.remove('hidden');
                setRequired(noTreatmentRadios, true); 
            }
        }

        function setupConditionalLogic() {
            document.querySelectorAll('input[name="gender"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const pregQ = document.getElementById('pregnancyQuestion');
                    const pregRadios = document.querySelectorAll('input[name="pregnant_lactating"]');
                    const isFemale = this.value === 'female';
                    pregQ.classList.toggle('hidden', !isFemale);
                    setRequired(pregRadios, isFemale);
                    if (!isFemale) {
                        document.getElementById('pregnancyStop').style.display = 'none';
                        surveyStopped = false; showSection(currentSection);
                    }
                });
            });
            
            document.querySelectorAll('input[name="pregnant_lactating"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const isPregnantOrLactating = this.value === 'yes';
                    document.getElementById('pregnancyStop').style.display = isPregnantOrLactating ? 'block' : 'none';
                    surveyStopped = isPregnantOrLactating;
                    showSection(currentSection); 
                });
            });
            
            document.querySelectorAll('input[name="work_situation"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const conditions = {
                        part_time: { question: 'partTimeQuestion', input: 'partTimeNumber', type: 'number' },
                        partial_disability: { question: 'disabilityPercentageQuestion', input: 'disability_percentage', type: 'select', also: { question: 'disabilityReasonQuestion', radios: 'disability_reason'} },
                        full_disability: { question: 'disabilityReasonQuestion', radios: 'disability_reason'},
                        not_working: { question: 'notWorkingReasonQuestion', radios: 'not_working_reason'}
                    };
                    // Hide all and remove required from their specific inputs/radios
                    Object.values(conditions).forEach(cond => {
                        if(document.getElementById(cond.question)) document.getElementById(cond.question).classList.add('hidden');
                        if(cond.input && document.getElementById(cond.input)) setRequired([document.getElementById(cond.input)], false);
                        if(cond.radios) setRequired(document.querySelectorAll(`input[name="${cond.radios}"]`), false);
                        if(cond.also && document.getElementById(cond.also.question)) {
                             document.getElementById(cond.also.question).classList.add('hidden');
                             setRequired(document.querySelectorAll(`input[name="${cond.also.radios}"]`), false);
                        }
                    });

                    const selectedCondition = conditions[this.value];
                    if (selectedCondition) {
                        if(document.getElementById(selectedCondition.question)) document.getElementById(selectedCondition.question).classList.remove('hidden');
                        if(selectedCondition.input && document.getElementById(selectedCondition.input)) setRequired([document.getElementById(selectedCondition.input)], true);
                        if(selectedCondition.radios) setRequired(document.querySelectorAll(`input[name="${selectedCondition.radios}"]`), true);
                         if(selectedCondition.also && document.getElementById(selectedCondition.also.question)) {
                             document.getElementById(selectedCondition.also.question).classList.remove('hidden');
                             setRequired(document.querySelectorAll(`input[name="${selectedCondition.also.radios}"]`), true);
                        }
                    }
                });
            });
            
            document.querySelectorAll('input[name="ever_treated"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const treatmentDiv = document.getElementById('treatmentQuestions');
                    const isYes = this.value === 'yes';
                    treatmentDiv.style.display = isYes ? 'block' : 'none';

                    setRequired([document.querySelector('select[name="first_treatment"]')], isYes);
                    ['current_oral', 'current_injectable', 'current_topical', 'current_phototherapy', 'current_alternative', 'treatment_satisfaction'].forEach(name => {
                        setRequired(document.querySelectorAll(`input[name="${name}"]`), isYes);
                    });
                    
                    // Manage current_no_treatment_any specifically
                    const noTreatmentRadios = document.querySelectorAll('input[name="current_no_treatment_any"]');
                    if (isYes) {
                        updateNoTreatmentQuestionVisibility(); // This will set visibility and required based on other treatments
                    } else {
                        document.getElementById('currentNoTreatmentAnyQuestionGroup').classList.add('hidden');
                        setRequired(noTreatmentRadios, false);
                    }

                    if (!isYes) { 
                        ['currentOralMedsQuestion', 'currentInjectableMedsQuestion', 'currentTopicalMedsQuestion'].forEach(id => {
                            const el = document.getElementById(id);
                            if (el) {
                                el.classList.add('hidden');
                                el.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                                    cb.checked = false; cb.closest('.checkbox-option')?.classList.remove('selected');
                                });
                            }
                        });
                         // Also clear the other current treatment radio buttons
                        ['current_oral', 'current_injectable', 'current_topical', 'current_phototherapy', 'current_alternative', 'current_no_treatment_any', 'treatment_satisfaction'].forEach(name => {
                            document.querySelectorAll(`input[name="${name}"]`).forEach(rb => {
                                rb.checked = false;
                                (rb.closest('.radio-option') || rb.closest('.scale-option'))?.classList.remove('selected');
                            });
                        });
                    }
                });
            });
            
            ['current_oral', 'current_injectable', 'current_topical', 'current_phototherapy', 'current_alternative'].forEach(name => {
                document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
                    radio.addEventListener('change', updateNoTreatmentQuestionVisibility);
                });
            });

            function setupConditionalCheckbox(radioName, questionId, checkboxGroupName) {
                document.querySelectorAll(`input[name="${radioName}"]`).forEach(radio => {
                    radio.addEventListener('change', function() {
                        const questionDiv = document.getElementById(questionId);
                        if (questionDiv) {
                            const isYes = this.value === 'yes';
                            questionDiv.classList.toggle('hidden', !isYes);
                            if (!isYes) {
                                document.querySelectorAll(`input[name="${checkboxGroupName}"]`).forEach(cb => {
                                    cb.checked = false; cb.closest('.checkbox-option')?.classList.remove('selected');
                                });
                            }
                        }
                        // If this is a current treatment radio, also update the "no treatment" question
                        if (['current_oral', 'current_injectable', 'current_topical'].includes(radioName)) {
                            updateNoTreatmentQuestionVisibility();
                        }
                    });
                });
            }
            setupConditionalCheckbox('current_oral', 'currentOralMedsQuestion', 'current_oral_meds');
            setupConditionalCheckbox('current_injectable', 'currentInjectableMedsQuestion', 'current_injectable_meds');
            setupConditionalCheckbox('current_topical', 'currentTopicalMedsQuestion', 'current_topical_meds');
            setupConditionalCheckbox('past_oral_received', 'pastOralMedsQuestion', 'past_oral_meds');
            setupConditionalCheckbox('past_injectable_received', 'pastInjectableMedsQuestion', 'past_injectable_meds');
            setupConditionalCheckbox('past_topical_received', 'pastTopicalMedsQuestion', 'past_topical_meds');
        }
        
        function setupFormInteractions() {
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.addEventListener('focus', startTimer);
                input.addEventListener('input', startTimer);
                input.addEventListener('change', startTimer);
            });
            
            document.querySelectorAll('.radio-option').forEach(option => {
                option.addEventListener('click', function() {
                    const radio = this.querySelector('input[type="radio"]');
                    if (radio && !surveyStopped) {
                        radio.checked = true;
                        document.querySelectorAll(`input[name="${radio.name}"]`).forEach(r => {
                            r.closest('.radio-option')?.classList.remove('selected');
                        });
                        this.classList.add('selected');
                        radio.dispatchEvent(new Event('change'));
                    }
                });
            });
            
            document.querySelectorAll('.checkbox-option').forEach(option => {
                option.addEventListener('click', function() {
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    if (checkbox && !surveyStopped) {
                        checkbox.checked = !checkbox.checked;
                        this.classList.toggle('selected', checkbox.checked); 
                        checkbox.dispatchEvent(new Event('change'));
                        startTimer();
                    }
                });
            });
            
            document.querySelectorAll('.scale-option').forEach(option => {
                option.addEventListener('click', function() {
                    const radio = this.querySelector('input[type="radio"]');
                    if (radio && !surveyStopped) {
                        radio.checked = true;
                        document.querySelectorAll(`input[name="${radio.name}"]`).forEach(r => {
                           r.closest('.scale-option')?.classList.remove('selected');
                        });
                        this.classList.add('selected');
                        radio.dispatchEvent(new Event('change'));
                        startTimer();
                    }
                });
            });
        }
        
        document.getElementById('surveyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (surveyStopped) return;

            let firstInvalidFieldOverall = null;
            for (const sectionId of sections) { 
                const sectionElement = document.getElementById(sectionId);
                const fieldsToCheck = sectionElement.querySelectorAll('input[required], select[required], textarea[required]');
                for (const field of fieldsToCheck) {
                    let isFieldEffectivelyVisible = true;
                    let currentElement = field;
                     while (currentElement && currentElement !== document.body) {
                        const styles = window.getComputedStyle(currentElement);
                         if (styles.display === 'none' || styles.visibility === 'hidden' || currentElement.classList.contains('hidden')) {
                            if (field.id === 'affected_body_parts_validation' && currentElement.id === 'affected_body_parts_validation') {
                               const bodyPartsGroup = document.getElementById('affectedBodyPartsGroup');
                                if (bodyPartsGroup && window.getComputedStyle(bodyPartsGroup).display === 'none') isFieldEffectivelyVisible = false;
                            } else {
                                isFieldEffectivelyVisible = false;
                            }
                            break;
                        }
                        currentElement = currentElement.parentElement;
                    }

                    if (isFieldEffectivelyVisible && !field.checkValidity()) {
                        firstInvalidFieldOverall = field;
                        break;
                    }
                }
                if (firstInvalidFieldOverall) break;
            }
            
            if (firstInvalidFieldOverall) {
                const invalidSectionIndex = sections.indexOf(firstInvalidFieldOverall.closest('.section').id);
                if (invalidSectionIndex !== currentSection) {
                    showSection(invalidSectionIndex); 
                }
                setTimeout(() => { 
                    if (typeof firstInvalidFieldOverall.reportValidity === 'function') {
                        firstInvalidFieldOverall.reportValidity();
                    } else {
                        firstInvalidFieldOverall.focus();
                    }
                     if (firstInvalidFieldOverall.id === 'affected_body_parts_validation') {
                         alert('Please select at least one affected body part.');
                    } else {
                        alert('Please complete all required fields.');
                    }
                }, 100); 
                return;
            }
            
            if (!timerStarted) { 
                 alert("It seems the survey was not actively filled. Please ensure you go through the questions.");
                 return;
            }
            
            const endTime = new Date();
            const totalTime = Math.floor((endTime - timerStart) / 1000);
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('completionTime').textContent = timeString;
            document.getElementById('timerModal').style.display = 'block';
            
            console.log('Survey completed in:', timeString);
        });
        
        function closeModal() {
            document.getElementById('timerModal').style.display = 'none';
        }
        
        window.addEventListener('click', function(event) {
            if (event.target === document.getElementById('timerModal')) {
                closeModal();
            }
        });
    </script>
</body>
</html>
